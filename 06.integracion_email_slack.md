# ğŸ“© IntegraciÃ³n de Jenkins con Email y Slack

---

## ğŸ§­ Â¿Por quÃ© integrar Jenkins con Email y Slack?

La integraciÃ³n de `Jenkins` con sistemas de notificaciÃ³n como `Email` y `Slack` tiene un propÃ³sito esencial en los
entornos de `CI/CD (IntegraciÃ³n y Despliegue Continuos)`: mantener al equipo `informado en tiempo real` sobre el
estado de las ejecuciones.

### ğŸ¯ Objetivos principales

- ğŸ“¢ `Alertar al equipo de forma inmediata` ante una compilaciÃ³n fallida (`broken build`).
- ğŸš€ `Aumentar la productividad` y capacidad de respuesta del equipo de desarrollo.
- ğŸ‘€ `Monitorear automÃ¡ticamente` los trabajos sin necesidad de revisar manualmente el panel de `Jenkins`.
- ğŸ”„ `Reaccionar rÃ¡pidamente` ante fallas para evitar la propagaciÃ³n de errores a entornos posteriores.

### ğŸ’¡ Ejemplo real en empresas

En una pipeline real, los equipos configuran `Jenkins` para notificar:

- Ã‰xito o fallo de un build.
- Resultados de pruebas unitarias o de integraciÃ³n.
- Despliegues completados en entornos de staging o producciÃ³n.

De esta forma, un DevOps engineer o un desarrollador puede actuar inmediatamente ante un problema sin necesidad de
abrir Jenkins.

### âš™ï¸ CÃ³mo funciona la comunicaciÃ³n

Existen dos enfoques principales para mantener a `Jenkins` y los desarrolladores sincronizados:

| Tipo de flujo                    | DescripciÃ³n                                                                                                                                                                                    |
|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `Pull` (consulta periÃ³dica)      | Jenkins consulta el sistema de control de versiones (por ejemplo, GitHub o GitLab) cada cierto intervalo de tiempo para detectar cambios.                                                      |
| `Push` (notificaciÃ³n automÃ¡tica) | El sistema de control de versiones envÃ­a directamente una notificaciÃ³n (`webhook`) a Jenkins cada vez que hay un nuevo `commit` o `push`. Este mÃ©todo es el mÃ¡s eficiente y usado actualmente. |

ğŸ’¡ Mejor prÃ¡ctica recomendada
> Las empresas modernas prefieren el modelo `â€œpushâ€` usando `webhooks`, ya que reduce la carga de `Jenkins` y garantiza
> una respuesta inmediata a los cambios de cÃ³digo.

## ğŸ“§ InstalaciÃ³n del Email Extension Plugin

Por defecto, cuando instalamos `Jenkins`, el sistema incluye el plugin de correo electrÃ³nico bÃ¡sico, encargado de enviar
notificaciones simples. Sin embargo, para obtener mÃ¡s flexibilidad y control sobre el formato y los destinatarios, es
recomendable usar el `Email Extension Plugin` (`Email-ext`).

Para comprobar si ya estÃ¡ instalado:

1. Navega a: `Administrar Jenkins` â†’ `Plugins`

![01.png](assets/section-06/01.png)

2. Selecciona la pestaÃ±a `Installed plugins` (Plugins instalados)
3. En el campo de bÃºsqueda escribe: `Email`

![02.png](assets/section-06/02.png)

Como vemos, el resultado anterior muestra el plugin `Email Extension Plugin`, eso significa que ya lo tenemos instalado.

> Con esta comprobaciÃ³n podemos concluir que el plugin de Email se encuentra correctamente instalado y disponible para
> configurar notificaciones.

### ğŸ’¡ Nota

El `Email Extension Plugin` amplÃ­a las capacidades del plugin de correo estÃ¡ndar. Permite:

- Personalizar el asunto y cuerpo del mensaje (incluso usando variables de entorno de `Jenkins`).
- Definir `plantillas HTML` para reportes mÃ¡s visuales.
- Enviar notificaciones condicionadas (por ejemplo, solo cuando el build falla).

## ğŸ“¬ IntegraciÃ³n de Jenkins con Gmail

### âœ¨ ConfiguraciÃ³n general

El objetivo de esta secciÃ³n es permitir que `Jenkins pueda enviar correos automÃ¡ticos` ante eventos relevantes, como
fallos de compilaciÃ³n o ejecuciones exitosas. Para este ejemplo usaremos `Gmail como servidor SMTP`, lo que nos
permitirÃ¡ realizar pruebas reales sin necesidad de un servidor de correo propio.

### ğŸ” Crear una contraseÃ±a de aplicaciÃ³n en Gmail

Para mantener la seguridad de tu cuenta, `no se debe usar la contraseÃ±a real de Gmail en Jenkins`. En su lugar, se crea
una `contraseÃ±a de aplicaciÃ³n`, especialmente diseÃ±ada para integraciones con terceros.

ğŸ”— `Referencia oficial`:
[Iniciar sesiÃ³n con contraseÃ±as de aplicaciÃ³n](https://support.google.com/accounts/answer/185833?hl=es)

ğŸ§­ Pasos para generar la contraseÃ±a

1. Accede a tu [cuenta de Google](https://myaccount.google.com/).
2. Selecciona la pestaÃ±a `Seguridad`.
3. En la secciÃ³n `CÃ³mo inicias sesiÃ³n en Google`, activa o revisa la `VerificaciÃ³n en dos pasos`.
4. Una vez activada, aparecerÃ¡ una nueva opciÃ³n: `ContraseÃ±as de aplicaciÃ³n`.
5. Crea una nueva contraseÃ±a con un nombre descriptivo, por ejemplo: `Jenkins CI/CD`.
6. Google mostrarÃ¡ una contraseÃ±a de `16 caracteres`. Copia esta contraseÃ±a y guÃ¡rdala en un lugar seguro, ya que serÃ¡
   la que `Jenkins` usarÃ¡ para autenticar el envÃ­o de correos.

ğŸ”— `Acceso directo`: Puedes ir directamente al `paso 5` ingresando a https://myaccount.google.com/apppasswords

âš™ï¸ ExplicaciÃ³n tÃ©cnica

> Las `contraseÃ±as de aplicaciÃ³n` son tokens Ãºnicos generados por Google para reemplazar tu contraseÃ±a real cuando un
> servicio (como Jenkins) se conecta mediante SMTP. No requieren verificaciÃ³n de dos pasos y pueden revocarse en
> cualquier momento.

### âš™ï¸ Configurar el servidor SMTP en Jenkins

Como siguiente paso vamos a configurar el servidor de correo. Para eso seguimos los siguientes pasos:

1. En el panel principal de Jenkins, dirÃ­gete a: `Administrar Jenkins` â†’ `System`

![03.png](assets/section-06/03.png)

2. DesplÃ¡zate hasta la secciÃ³n `NotificaciÃ³n por correo electrÃ³nico` y completa los campos con la siguiente informaciÃ³n:

| Campo              | Valor                             |
|--------------------|-----------------------------------|
| Servidor SMTP      | `smtp.gmail.com`                  |
| AutenticaciÃ³n SMTP | âœ… Activado                        |
| Usuario            | `tucorreo@gmail.com`              |
| ContraseÃ±a         | ContraseÃ±a de aplicaciÃ³n generada |
| Seguridad SSL      | âœ… Activado                        |
| Puerto SMTP        | `465`                             |

![04.png](assets/section-06/04.png)

3. Antes de guardar, realiza una `prueba de envÃ­o de correo`:

- Marca la casilla `â€œProbar la configuraciÃ³n enviando un correo de pruebaâ€`.
- Introduce un correo destinatario vÃ¡lido.
- Haz clic en `â€œProbar configuraciÃ³nâ€`.

![05.png](assets/section-06/05.png)

4. Si la prueba es exitosa, aparecerÃ¡ el mensaje: `Email was successfully sent`. Y recibirÃ¡s un correo con un mensaje de
   prueba:

![06.png](assets/section-06/06.png)

âœ… Resultado esperado:
> El correo de prueba llega correctamente, confirmando que `Jenkins` puede conectarse con el servidor `SMTP` de `Gmail`.

### âœ‰ï¸ Configurar Extended E-mail Notification (Email-ext)

Para aprovechar las capacidades avanzadas del plugin `Email Extension Plugin`, configuramos su secciÃ³n especÃ­fica:

1. En la misma pÃ¡gina de configuraciÃ³n del sistema, busca `â€œExtended E-mail Notificationâ€` y agrega el `SMTP Server` y
   `SMTP Port`.

![07.png](assets/section-06/07.png)

2. Haz clic en `Add` â†’ `Jenkins` para agregar nuevas credenciales.

![08.png](assets/section-06/08.png)

3. Completa los campos:

- `Username`: tu correo de Gmail.
- `Password`: la contraseÃ±a de aplicaciÃ³n generada.
- Luego selecciona la credencial creada en el campo `Credentials`.
- Marca la opciÃ³n `Use SSL`.

![09.png](assets/section-06/09.png)

4. Configura los `triggers` predeterminados (cuÃ¡ndo se enviarÃ¡n las notificaciones):

- ğŸŸ¡ Before Build
- ğŸ”´ Failure - Any
- ğŸŸ¢ Success

![10.png](assets/section-06/10.png)

5. Finalmente, haz clic en `Save` para guardar los cambios.

### ğŸ‘¥ Agregar destinatarios en un Job especÃ­fico

1. Abre tu Job (por ejemplo, `Primer Job del Curso`), seleccionamos `configurar`.

![11.png](assets/section-06/11.png)

2. Nos vamos a la parte inferior en el apartado `Acciones para ejecutar despuÃ©s`. En el desplegable seleccionamos la
   acciÃ³n `Editable Email Notification`.

![12.png](assets/section-06/12.png)

3. En el campo de destinatarios, agrega los correos a los que Jenkins enviarÃ¡ las notificaciones.

![13.png](assets/section-06/13.png)

4. Guarda los cambios con `Apply` â†’ `Save`.

### ğŸ§ª Prueba de envÃ­o de notificaciones

1. Ejecuta el Job haciendo clic en `â€œConstruir ahoraâ€`.

![14.png](assets/section-06/14.png)

2. En la consola de salida, deberÃ­as ver mensajes como los siguientes:

````bash
Email was triggered for: Before Build
Sending email for trigger: Before Build
Sending email to: magadiflo@gmail.com
Email was triggered for: Success
Sending email for trigger: Success 
````

![15.png](assets/section-06/15.png)

3. Revisa tu bandeja de entrada: deberÃ­as recibir un correo con un asunto similar a:
   `â€œPrimer Job del Curso - Build #11 - Building!â€`

![16.png](assets/section-06/16.png)

4. Al hacer clic en el enlace del mensaje, serÃ¡s redirigido a Jenkins para visualizar el estado del Job.

![17.png](assets/section-06/17.png)

### ğŸ§  ConclusiÃ³n

Has configurado exitosamente la integraciÃ³n de `Jenkins con Gmail`, lo que permite que tu servidor notifique
automÃ¡ticamente los resultados de cada ejecuciÃ³n. Esta funcionalidad es fundamental en entornos de integraciÃ³n continua,
ya que:

- Permite detectar fallas de forma temprana.
- Facilita la colaboraciÃ³n entre equipos.
- Mejora la observabilidad del pipeline.

ğŸ’¡ En entornos empresariales:
> En lugar de Gmail, se suele integrar Jenkins con servidores corporativos SMTP (como Microsoft Exchange, AWS SES o
> SendGrid) para tener mayor control, trazabilidad y cumplimiento de polÃ­ticas de seguridad.
