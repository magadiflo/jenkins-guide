# ğŸš€ SecciÃ³n 13: Java Maven DSL

---

## ğŸ”“ Deshabilitando la seguridad de scripts para los Job DSL

Cuando trabajamos con `Job DSL` (Domain Specific Language) en Jenkins, es comÃºn que despuÃ©s de modificar algÃºn script
â€”especialmente en el `Seed Job`â€” `Jenkins bloquee la ejecuciÃ³n hasta que el administrador apruebe manualmente` el
contenido del DSL. Esto ocurre porque, por defecto, `Jenkins` aplica un mecanismo de `Script Security` para evitar
que scripts potencialmente maliciosos afecten la configuraciÃ³n del servidor.

Sin embargo, mientras desarrollamos y hacemos iteraciones rÃ¡pidas, este proceso puede ser molesto e innecesario. Para
entornos de prueba o aprendizaje, podemos `deshabilitar temporalmente esta validaciÃ³n`.

### âš ï¸ Advertencia importante (mundo real)

En entornos corporativos o servidores Jenkins compartidos, nunca desactives la seguridad de scripts.
Las empresas mantienen esta opciÃ³n activada para evitar que alguien ejecute un DSL que modifique trabajos, agentes o
ejecuciones sin control.

La opciÃ³n solo conviene desactivarla cuando:

- "estÃ¡s en un Jenkins local",
- "estÃ¡s en un ambiente sandbox",
- "o eres administrador y sabes exactamente quÃ© scripts se ejecutarÃ¡n".

### ğŸ› ï¸ Pasos para deshabilitar la Script Security en DSL

Para permitir que Jenkins ejecute los scripts sin solicitar aprobaciÃ³n manual:

1. Ir a Manage Jenkins (Administrar Jenkins).
2. Seleccionar Security.
3. Desmarcar la opciÃ³n: `Enable script security for Job DSL scripts`
4. Guardar los cambios.

![01.png](assets/section-13/01.png)

## ğŸ§© Contexto previo antes de la creaciÃ³n de los Jobs

En la `SecciÃ³n 7: IntegraciÃ³n de Jenkins con una App Java + Maven`, creamos manualmente el job `java_app_con_maven`
y ahÃ­ configuramos:

- ğŸ“¦ Origen del cÃ³digo fuente (repositorio Git)
- ğŸ—ï¸ Build Steps (comandos Maven para compilar, ejecutar tests y empaquetar el .jar)
- ğŸ“¬ Notificaciones por correo
- ğŸ’¬ Notificaciones por Slack
- ğŸ“ PublicaciÃ³n de reportes de pruebas JUnit

En resumen, construimos un `job clÃ¡sico configurado manualmente desde la UI de Jenkins`.

![02.png](assets/section-13/02.png)

### ğŸ” Â¿QuÃ© cambia en esta SecciÃ³n 13?

En esta secciÃ³n daremos un paso importante hacia la automatizaciÃ³n real: vamos a reemplazar la configuraciÃ³n manual
por una configuraciÃ³n declarativa usando `Job DSL scripts`.

#### ğŸ¯ Â¿QuÃ© significa esto?

Toda la configuraciÃ³n que antes hacÃ­amos clic por clic en la interfaz ahora la definiremos mediante cÃ³digo `.groovy`,
dentro de un `Seed Job` (job padre).

Luego, solo debemos `ejecutar ese Seed Job`, y Jenkins:

- GenerarÃ¡ automÃ¡ticamente el job hijo.
- AplicarÃ¡ toda la configuraciÃ³n especificada en el DSL.
- MantendrÃ¡ una configuraciÃ³n reproducible y versionable.

#### ğŸ’¼ Â¿Por quÃ© esto es importante en el mundo real?

En entornos profesionales, la configuraciÃ³n manual en Jenkins se considera una mala prÃ¡ctica, porque:

- âŒ No se versiona.
- âŒ Es difÃ­cil replicar en nuevos entornos (QA, Stage, Prod).
- âŒ No es auditable.
- âŒ Depende de la memoria del operador ("Â¿quÃ© checkbox activÃ© la vez pasada?").

Con `Job DSL` o `Pipeline-as-Code` (Jenkinsfile):

- âœ”ï¸ La configuraciÃ³n estÃ¡ en Git.
- âœ”ï¸ La creaciÃ³n de jobs es idÃ©ntica entre entornos.
- âœ”ï¸ Puedes hacer PRs para revisar cambios.
- âœ”ï¸ Evitas configuraciones inconsistentes.
- âœ”ï¸ Puedes reconstruir toda la estructura de jobs desde cero.

ğŸ’¡ Nota:

Aunque `DSL Job` ha sido muy usado, muchas empresas estÃ¡n migrando a `Multibranch Pipelines` y `Pipeline-as-Code`.
Sin embargo, `Job DSL` sigue siendo Ãºtil para:

- Generar estructuras de carpetas.
- Crear plantillas de jobs.
- Crear cientos de jobs parametrizados.
- Automatizar la gestiÃ³n del propio Jenkins.


