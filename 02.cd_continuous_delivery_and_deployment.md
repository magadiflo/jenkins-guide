# ğŸš€ Entrega Continua y Despliegue Continuo (CD - Continuous Delivery/Deployment)

---

Ya vimos en detalle quÃ© es la `IntegraciÃ³n Continua (CI)`, donde el objetivo principal es verificar que el cÃ³digo se
integra correctamente, compila sin errores, pasa todas las pruebas y genera un artefacto deployable (en nuestro caso,
un `.jar`).

Ahora veremos la siguiente fase del ciclo CI/CD: `el CD`, que en realidad representa dos conceptos relacionados pero
diferentes:

- ğŸ”µ`Continuous Delivery` (Entrega Continua)
- ğŸŸ¢`Continuous Deployment` (Despliegue Continuo)

Ambos se enfocan en `automatizar la entrega del software a los diferentes ambientes`, pero con un nivel de
automatizaciÃ³n diferente. `CD no son dos etapas separadas, sino dos posibles niveles de madurez del mismo concepto`:
una empresa puede elegir quedarse en `Continuous Delivery` permanentemente, o evolucionar hacia `Continuous Deployment`
cuando su cultura y procesos estÃ©n listos.

## âš™ï¸ Â¿QuÃ© es CD (Continuous Delivery/Deployment)?

`CD` es la prÃ¡ctica de `automatizar el proceso` de llevar el cÃ³digo desde el repositorio hasta los ambientes de
ejecuciÃ³n (`QA`, `Staging`, `ProducciÃ³n`). Mientras que `CI` se enfoca en la construcciÃ³n y validaciÃ³n del artefacto,
`CD` se enfoca en su despliegue.

### ğŸ¯ Objetivo principal

Reducir el tiempo y el esfuerzo necesarios para llevar nuevas funcionalidades, correcciones de bugs y cambios a los
usuarios finales de manera segura, confiable y frecuente.

## ğŸ”µ Continuous Delivery (Entrega Continua)

La `Entrega Continua (CD)` es una prÃ¡ctica donde el cÃ³digo que pasa exitosamente por el pipeline de `CI` estÃ¡
`siempre listo para ser desplegado a producciÃ³n`, pero el despliegue final `requiere aprobaciÃ³n manual`.

### ğŸ“Š Â¿CÃ³mo funciona?

````scss
CI (AutomÃ¡tico) â†’ Build â†’ Test â†’ Package â†’ Artefacto (.jar)
                                              â†“
CD (Semi-automÃ¡tico) â†’ Deploy a QA/Staging (automÃ¡tico)
                                              â†“
                       Pruebas en ambiente (manual/automÃ¡tico)
                                              â†“
                       â¸ï¸ AprobaciÃ³n manual (Tech Lead/PM)
                                              â†“
                       Deploy a ProducciÃ³n (automÃ¡tico despuÃ©s de aprobaciÃ³n)
````

### ğŸ¯ CaracterÃ­sticas clave

| Aspecto             | DescripciÃ³n                                               |
|---------------------|-----------------------------------------------------------|
| AutomatizaciÃ³n      | Alta, pero con gate manual antes de producciÃ³n            |
| Deploy a QA/Staging | âœ… Completamente automÃ¡tico                                |
| Deploy a ProducciÃ³n | â¸ï¸ `Requiere aprobaciÃ³n humana`                           |
| Frecuencia          | El cÃ³digo estÃ¡ listo para producciÃ³n en cualquier momento |
| Riesgo              | Bajo - hay validaciÃ³n humana antes de producciÃ³n          |
| Control             | Alto - equipo decide cuÃ¡ndo desplegar                     |

### ğŸ’¼ Escenario tÃ­pico en empresas

Imagina que tu equipo trabaja en una aplicaciÃ³n Spring Boot para un banco:

1. Desarrollador hace push a `develop`.
2. `CI` ejecuta: `build` â†’ `tests` â†’ `code quality` â†’ `package`.
3. `CD` automÃ¡tico: Despliega el `.jar` a ambiente de `QA`.
4. `QA Team` ejecuta pruebas manuales y automatizadas.
5. Si todo estÃ¡ OK, se crea un `Pull Request` hacia `main`.
6. `Tech Lead` revisa y aprueba el `PR`.
7. Se hace `merge` a `main`.
8. `CD automÃ¡tico`: Despliega a `Staging` (`pre-producciÃ³n`).
9. `Product Owner` valida las nuevas funcionalidades.
10. `Tech Lead` presiona el botÃ³n `Deploy to Production` en `Jenkins`.
11. `CD` automÃ¡tico: Ejecuta el despliegue a ProducciÃ³n.

### âœ… Ventajas de Continuous Delivery

| Ventaja                  | DescripciÃ³n                                                |
|--------------------------|------------------------------------------------------------|
| **Control**              | El equipo decide exactamente cuÃ¡ndo ir a producciÃ³n        |
| **ValidaciÃ³n adicional** | Permite revisiones finales antes de producciÃ³n             |
| **ReducciÃ³n de riesgo**  | Menos posibilidad de desplegar cÃ³digo problemÃ¡tico         |
| **Compliance**           | Cumple con requisitos regulatorios que exigen aprobaciones |
| **Confianza**            | El equipo se siente mÃ¡s seguro con un Ãºltimo checkpoint    |

### âŒ Desventajas

| Desventaja            | DescripciÃ³n                                              |
|-----------------------|----------------------------------------------------------|
| **Retraso humano**    | Depende de que alguien apruebe (puede demorar)           |
| **Cuello de botella** | Si el aprobador no estÃ¡ disponible, se retrasa el deploy |
| **Menos feedback**    | Los usuarios reciben las mejoras mÃ¡s tarde               |

### ğŸ¢ Â¿CuÃ¡ndo usar Continuous Delivery?

Es ideal para:

- ğŸ¦ **Aplicaciones crÃ­ticas**: Sistemas bancarios, salud, gobierno.
- ğŸ“Š **Equipos con procesos de QA rigurosos**
- ğŸ”’ **Ambientes con requisitos de compliance estrictos**
- ğŸ‘¥ **Equipos que prefieren control total sobre releases**
- ğŸ¯ **Aplicaciones donde el timing del release es estratÃ©gico**

> ğŸ’¡ **Para desarrolladores:** Tu trabajo termina cuando el cÃ³digo pasa CI. El CD se encarga de moverlo por los
> ambientes, pero alguien de tu equipo debe aprobar el paso a producciÃ³n.

## ğŸŸ¢ Continuous Deployment (Despliegue Continuo)

El `Despliegue Continuo (CD)` es una prÃ¡ctica donde todo el cÃ³digo que pasa exitosamente por el pipeline de `CI` se
despliega `automÃ¡ticamente a producciÃ³n` `sin intervenciÃ³n humana`. Es el nivel mÃ¡ximo de automatizaciÃ³n en `CI/CD`.

### ğŸ“Š Â¿CÃ³mo funciona?

````scss
CI (AutomÃ¡tico) â†’ Build â†’ Test â†’ Package â†’ Artefacto (.jar)
                                              â†“
CD (100% AutomÃ¡tico) â†’ Deploy a QA (automÃ¡tico)
                                              â†“
                       Tests automatizados (automÃ¡tico)
                                              â†“
                       Deploy a Staging (automÃ¡tico)
                                              â†“
                       Tests automatizados (automÃ¡tico)
                                              â†“
                       Deploy a ProducciÃ³n (automÃ¡tico) âœ…
                                              â†“
                       Monitoreo y alertas automÃ¡ticas
````

> No hay aprobaciÃ³n manual en ningÃºn punto. Si tu cÃ³digo pasa todas las pruebas, va directo a producciÃ³n.

### ğŸ¯ CaracterÃ­sticas clave

| Aspecto             | DescripciÃ³n                                     |
|---------------------|-------------------------------------------------|
| AutomatizaciÃ³n      | âœ… 100% automÃ¡tica en todos los ambientes        |
| Deploy a QA/Staging | âœ… Completamente automÃ¡tico                      |
| Deploy a ProducciÃ³n | âœ… Completamente automÃ¡tico                      |
| Frecuencia          | MÃºltiples despliegues diarios (incluso decenas) |
| Riesgo              | Mayor - no hay validaciÃ³n humana                |
| Control             | Bajo - el pipeline decide cuÃ¡ndo desplegar      |

### ğŸ’¼ Escenario tÃ­pico en empresas

Imagina una startup de `e-commerce` que necesita iterar rÃ¡pidamente:

1. Desarrollador hace push a `main`.
2. `CI` automÃ¡tico: `build` â†’ `tests` â†’ `code quality` â†’ `package`.
3. `CD` automÃ¡tico: Despliega a `QA`.
4. `Tests E2E` automÃ¡ticos se ejecutan en `QA`.
5. Si pasan âœ…, CD automÃ¡tico: Despliega a Staging.
6. `Smoke tests` se ejecutan en Staging.
7. Si pasan âœ…, CD automÃ¡tico: Despliega a ProducciÃ³n.
8. Monitoreo detecta mÃ©tricas de salud (errores, latencia, etc.).
9. Si hay problemas, rollback automÃ¡tico.

> Todo esto puede suceder en menos de 10 minutos desde el push inicial.

### âœ… Ventajas de Continuous Deployment

| Ventaja                     | DescripciÃ³n                                          |
|-----------------------------|------------------------------------------------------|
| **Velocidad mÃ¡xima**        | Features llegan a usuarios en minutos/horas, no dÃ­as |
| **Feedback rÃ¡pido**         | Detectas problemas en producciÃ³n inmediatamente      |
| **Menor riesgo por deploy** | Cambios pequeÃ±os y frecuentes son mÃ¡s seguros        |
| **Sin cuellos de botella**  | No depende de aprobaciones humanas                   |
| **Fuerza buenas prÃ¡cticas** | Obliga a tener tests exhaustivos y monitoreo robusto |

### âŒ Desventajas

| Desventaja                     | DescripciÃ³n                                                     |
|--------------------------------|-----------------------------------------------------------------|
| **Requiere tests exhaustivos** | Necesitas 90%+ de cobertura y tests confiables                  |
| **Infraestructura compleja**   | Requiere monitoreo avanzado, feature flags, rollback automÃ¡tico |
| **Mayor riesgo inicial**       | Si los tests no son buenos, bugs van directo a producciÃ³n       |
| **No apto para todos**         | Regulaciones o criticidad pueden impedirlo                      |
| **Cultura del equipo**         | Requiere alta disciplina y confianza en el proceso              |

### ğŸ¢ Â¿CuÃ¡ndo usar Continuous Deployment?

Es ideal para:

- ğŸš€ **Startups y productos digitales**: Necesitan iterar rÃ¡pidamente
- ğŸ“± **SaaS y aplicaciones web**: Actualizaciones transparentes para usuarios
- ğŸ§ª **Equipos con alta cobertura de tests** (>85%)
- ğŸ” **Empresas con monitoreo y observabilidad robustos**
- ğŸ¯ **Feature flags implementados** (para activar/desactivar funcionalidades sin redeploy)
- ğŸ‘¥ **Equipos maduros en DevOps** con cultura de ownership

> âš ï¸ **No recomendado para:** Sistemas mÃ©dicos crÃ­ticos, software embebido en hardware, aplicaciones con requisitos
> regulatorios estrictos, equipos sin cultura de testing sÃ³lida.

## ğŸ“Š Continuous Delivery vs Continuous Deployment

| Aspecto                          | **Continuous Delivery** ğŸ”µ      | **Continuous Deployment** ğŸŸ¢  |
|----------------------------------|---------------------------------|-------------------------------|
| **Deploy a QA**                  | âœ… AutomÃ¡tico                    | âœ… AutomÃ¡tico                  |
| **Deploy a Staging**             | âœ… AutomÃ¡tico                    | âœ… AutomÃ¡tico                  |
| **Deploy a ProducciÃ³n**          | â¸ï¸ Manual (requiere aprobaciÃ³n) | âœ… AutomÃ¡tico (sin aprobaciÃ³n) |
| **Frecuencia de releases**       | Semanal/quincenal               | MÃºltiples veces al dÃ­a        |
| **IntervenciÃ³n humana**          | SÃ­, antes de producciÃ³n         | No, completamente automÃ¡tico  |
| **Nivel de automatizaciÃ³n**      | Alto (~90%)                     | Total (100%)                  |
| **Riesgo**                       | Bajo (hay validaciÃ³n final)     | Medio (depende de tests)      |
| **Velocidad**                    | Media-Alta                      | MÃ¡xima                        |
| **Complejidad tÃ©cnica**          | Media                           | Alta                          |
| **Cobertura de tests requerida** | >70%                            | >90%                          |
| **Monitoreo requerido**          | Importante                      | CrÃ­tico                       |
| **Rollback**                     | Manual o automÃ¡tico             | Debe ser automÃ¡tico           |
| **Feature flags**                | Opcional                        | Altamente recomendado         |

## ğŸ¯ RelaciÃ³n entre CI, Continuous Delivery y Continuous Deployment

El flujo CI/CD no es un solo proceso monolÃ­tico, sino una combinaciÃ³n de etapas que trabajan en conjunto para llevar tu
cÃ³digo desde el repositorio hasta producciÃ³n de manera segura y eficiente.

`CI (Continuous Integration)` es la base fundamental y el punto de partida de todo el flujo. AquÃ­ es donde tu cÃ³digo es
integrado, validado y empaquetado. Esta fase pasa por una serie de etapas secuenciales (`checkout`, `build`, `test`,
`code quality`, `package`) hasta obtener un artefacto deployable listo para ser distribuido. Este artefacto puede ser
un `.jar` (en aplicaciones `Spring Boot`), un `.war` (para servidores de aplicaciones), o una `imagen Docker`
(para arquitecturas modernas basadas en contenedores).

Una vez que CI finaliza exitosamente y tenemos el artefacto en nuestras manos, comienza la siguiente fase:
`CD (Continuous Delivery/Deployment)`. AquÃ­ es donde las cosas se ponen interesantes, porque `CD tiene dos variantes`
y la elecciÃ³n entre una u otra depende de la cultura organizacional, madurez tÃ©cnica del equipo y criticidad de la
aplicaciÃ³n.

Si la empresa elige `Continuous Delivery`, el despliegue se realiza de forma `semi-automÃ¡tica`. Los ambientes como `QA`
y `Staging` se actualizan automÃ¡ticamente, pero el paso crÃ­tico hacia producciÃ³n requiere una `aprobaciÃ³n manual`
por parte de un `Tech Lead`, `Product Owner` o `Release Manager`. Este gate manual es el rasgo diferenciador de
esta variante, proporcionando un Ãºltimo punto de control humano antes de que los cambios lleguen a los usuarios
finales. Es como tener un "botÃ³n rojo" que alguien debe presionar conscientemente para desplegar a producciÃ³n.

Por otro lado, si la empresa opta por `Continuous Deployment` (la segunda variante), el proceso es completamente
automÃ¡tico de principio a fin. `No hay aprobaciones manuales`, no hay gates humanos. Si tu cÃ³digo pasa todas las
validaciones automatizadas (`tests unitarios`, `de integraciÃ³n`, `smoke tests`, `health checks`), el pipeline despliega
automÃ¡ticamente a producciÃ³n sin intervenciÃ³n humana. Esto representa el nivel mÃ¡ximo de automatizaciÃ³n en el desarrollo
de software moderno.

Ambas variantes son vÃ¡lidas y tienen sus casos de uso especÃ­ficos. La elecciÃ³n no es una cuestiÃ³n de "mejor" o "peor",
sino de `cuÃ¡l se adapta mejor a las necesidades y contexto de tu organizaciÃ³n`. Empresas altamente reguladas (finanzas,
salud) tienden hacia `Continuous Delivery` por su control adicional, mientras que startups y productos digitales Ã¡giles
prefieren `Continuous Deployment` por su velocidad de entrega.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CI (Continuous Integration)                  â”‚
â”‚                         Base fundamental                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Checkout cÃ³digo                                              â”‚
â”‚  â€¢ Build (mvn compile)                                          â”‚
â”‚  â€¢ Test (mvn test)                                              â”‚
â”‚  â€¢ Code Quality (SonarQube)                                     â”‚
â”‚  â€¢ Package (mvn package) â†’ genera .jar                          â”‚
â”‚                                                                 â”‚
â”‚  âœ… Artefacto listo para desplegar                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Continuous Delivery  â”‚           â”‚ Continuous Deploymentâ”‚
â”‚    (Semi-automÃ¡tico) â”‚           â”‚   (100% automÃ¡tico)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Deploy QA (auto)  â”‚           â”‚ âœ… Deploy QA (auto)  â”‚
â”‚ âœ… Tests QA          â”‚           â”‚ âœ… Tests QA (auto)   â”‚
â”‚ âœ… Deploy Staging    â”‚           â”‚ âœ… Deploy Staging    â”‚
â”‚    (auto)            â”‚           â”‚    (auto)            â”‚
â”‚ â¸ï¸ APROBACIÃ“N MANUAL â”‚           â”‚ âœ… Tests Staging     â”‚
â”‚ âœ… Deploy Production â”‚           â”‚    (auto)            â”‚
â”‚    (despuÃ©s de OK)   â”‚           â”‚ âœ… Deploy Production â”‚
â”‚                      â”‚           â”‚    (auto)            â”‚
â”‚ ğŸ¯ MÃ¡s control       â”‚           â”‚ ğŸ¯ MÃ¡s velocidad     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> ğŸ’¡ Para recordar: `CI` construye y valida, `CD` despliega. La diferencia entre `Continuous Delivery` y
> `Continuous Deployment` estÃ¡ en ese gate manual antes de producciÃ³n. Todo lo demÃ¡s es automÃ¡tico en ambos casos.

## ğŸ¢ Â¿QuÃ© modelo usa tu empresa?

### ğŸ”µ SeÃ±ales de que usan **Continuous Delivery**:

- Hay un "release manager" o "deployment approver"
- Los deploys a producciÃ³n son en horarios especÃ­ficos (ej: viernes por la tarde)
- Existe un proceso de "change request" o "deployment request"
- QA valida manualmente en staging antes de producciÃ³n

### ğŸŸ¢ SeÃ±ales de que usan **Continuous Deployment**:

- Cada merge a `main` va directo a producciÃ³n
- Hay mÃºltiples deploys a producciÃ³n diarios
- Feature flags estÃ¡n en todas partes
- Monitoreo y alertas son parte esencial del trabajo
- El equipo tiene ownership total (devs monitorean producciÃ³n)

## ğŸ“ Resumen ejecutivo

| Concepto                  | DefiniciÃ³n corta                                      | Gate manual | Velocidad | Riesgo |
|---------------------------|-------------------------------------------------------|-------------|-----------|--------|
| **CI**                    | Integra y valida cÃ³digo                               | âŒ No        | N/A       | Bajo   |
| **Continuous Delivery**   | Automatiza hasta staging, requiere OK para producciÃ³n | âœ… SÃ­        | Media     | Bajo   |
| **Continuous Deployment** | Automatiza TODO, incluido producciÃ³n                  | âŒ No        | MÃ¡xima    | Medio  |

La mayorÃ­a de empresas empiezan con CI, luego implementan Continuous Delivery, y finalmente (si su cultura y producto lo
permiten) evolucionan a Continuous Deployment.