# ğŸš€ SecciÃ³n 16: Node.js â€“ Docker Pipeline

---

## ğŸ³ Hacer todo en contenedores Docker

En esta lecciÃ³n trabajaremos con el plugin `Docker Pipeline`, una de las herramientas mÃ¡s usadas en entornos
`CI/CD` profesionales cuando se combinan:

- Jenkins
- Docker
- Pipelines declarativos
- Workloads que necesitan reproducibilidad del entorno (Node, Python, Java, etc.)

Este plugin permite que `las etapas del pipeline se ejecuten dentro de contenedores Docker`, garantizando que todas
las dependencias estÃ©n empacadas y aisladas del agente Jenkins.

### â­ Â¿Por quÃ© las empresas usan Docker en sus Pipelines?

- âœ” Eliminan el clÃ¡sico problema de "funciona en mi mÃ¡quina".
- âœ” Entornos reproducibles entre desarrollo, QA, staging y producciÃ³n.
- âœ” Facilita usar varias versiones de Node/Python/Java dentro de un mismo pipeline.
- âœ” Reduce la necesidad de instalar dependencias directamente en los agentes Jenkins.
- âœ” Mejora portabilidad: cambiar de Jenkins On-prem â†’ Jenkins en Kubernetes es trivial.

### ğŸ”§ Â¿QuÃ© podemos hacer con el plugin Docker Pipeline?

El plugin habilita una poderosa DSL dentro del pipeline declarativo:

- Build de imÃ¡genes Docker
    ````bash
    docker.build("mi-app-node")
    ````
- Push de imÃ¡genes a DockerHub / ECR / GCR / ACR
    ````bash
    docker.withRegistry("https://index.docker.io/v1/", "docker-hub-cred") {
        docker.build("mi-app-node").push("latest")
    }
    ````
- Ejecutar contenedores en lÃ­nea dentro del pipeline
    ````bash
    docker.image("node:18").inside {
        sh "node -v"
        sh "npm ci"
    }
    ````
- Ejecutar etapas con sus propias dependencias
    - Cada stage puede usar un contenedor diferente.
    - Este patrÃ³n es estÃ¡ndar en pipelines modernos:
        - Stage Build â†’ node:18-alpine
        - Stage Test â†’ node:18 + herramientas de test
        - Stage Deploy â†’ docker:cli

### ğŸ“¦ Instalando el plugin Docker Pipeline

Para instalarlo:

1. Ir a `Administrar Jenkins`
2. Seleccionar `Manage Plugins / Administrar Plugins`
3. Buscar `Docker Pipeline`
4. Instalar y reiniciar (si Jenkins lo solicita)

![01.png](assets/sertion-16/01.png)

